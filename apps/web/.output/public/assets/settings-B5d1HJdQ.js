import{n as Je,r as s,j as t,v as we,P as $,A as _t,i as ne,C as xe,w as Dt,D as Mt,E as Lt,d as He,F as zt,G as Ft,t as D,H as Ze,I as $t,J as Ht,u as Ut,B as L,f as Ve,K as qt,M as Bt,N as Kt}from"./main-CbN_EMft.js";import{C as le,a as ce,b as de,c as ue}from"./card-CFC9Pc_a.js";import{I as ve,T as Gt}from"./textarea-D0M3zx96.js";import{L as Q}from"./label-DNrsTEZe.js";import{e as Pe,R as Xe,A as Ue,C as et,g as tt,h as Vt,S as Oe,a as _e,b as De,c as Me,d as M,f as Wt}from"./formatDistanceToNow-BUPGt2AE.js";import{u as rt,c as nt,f as J,e as F,g as Se,h as ot,i as Yt,j as Qt,k as Jt,F as Zt,l as st,R as Xt,P as er,O as tr,C as rr}from"./index-1gxR_wNh.js";import{u as nr}from"./useLinkedInStatus-m3WGpr60.js";import"./en-US-DIdCsyf3.js";/**
 * @license lucide-react v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const or=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],sr=Je("Info",or);/**
 * @license lucide-react v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ar=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],ir=Je("Search",ar);var Ne="Popover",[at,Wn]=nt(Ne,[Pe]),ye=Pe(),[lr,X]=at(Ne),it=e=>{const{__scopePopover:n,children:r,open:a,defaultOpen:o,onOpenChange:i,modal:c=!1}=e,u=ye(n),f=s.useRef(null),[p,m]=s.useState(!1),[h,x]=rt({prop:a,defaultProp:o??!1,onChange:i,caller:Ne});return t.jsx(Xe,{...u,children:t.jsx(lr,{scope:n,contentId:J(),triggerRef:f,open:h,onOpenChange:x,onOpenToggle:s.useCallback(()=>x(v=>!v),[x]),hasCustomAnchor:p,onCustomAnchorAdd:s.useCallback(()=>m(!0),[]),onCustomAnchorRemove:s.useCallback(()=>m(!1),[]),modal:c,children:r})})};it.displayName=Ne;var lt="PopoverAnchor",cr=s.forwardRef((e,n)=>{const{__scopePopover:r,...a}=e,o=X(lt,r),i=ye(r),{onCustomAnchorAdd:c,onCustomAnchorRemove:u}=o;return s.useEffect(()=>(c(),()=>u()),[c,u]),t.jsx(Ue,{...i,...a,ref:n})});cr.displayName=lt;var ct="PopoverTrigger",dt=s.forwardRef((e,n)=>{const{__scopePopover:r,...a}=e,o=X(ct,r),i=ye(r),c=we(n,o.triggerRef),u=t.jsx($.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":ht(o.open),...a,ref:c,onClick:F(e.onClick,o.onOpenToggle)});return o.hasCustomAnchor?u:t.jsx(Ue,{asChild:!0,...i,children:u})});dt.displayName=ct;var qe="PopoverPortal",[dr,ur]=at(qe,{forceMount:void 0}),ut=e=>{const{__scopePopover:n,forceMount:r,children:a,container:o}=e,i=X(qe,n);return t.jsx(dr,{scope:n,forceMount:r,children:t.jsx(Se,{present:r||i.open,children:t.jsx(ot,{asChild:!0,container:o,children:a})})})};ut.displayName=qe;var pe="PopoverContent",pt=s.forwardRef((e,n)=>{const r=ur(pe,e.__scopePopover),{forceMount:a=r.forceMount,...o}=e,i=X(pe,e.__scopePopover);return t.jsx(Se,{present:a||i.open,children:i.modal?t.jsx(fr,{...o,ref:n}):t.jsx(mr,{...o,ref:n})})});pt.displayName=pe;var pr=_t("PopoverContent.RemoveScroll"),fr=s.forwardRef((e,n)=>{const r=X(pe,e.__scopePopover),a=s.useRef(null),o=we(n,a),i=s.useRef(!1);return s.useEffect(()=>{const c=a.current;if(c)return Yt(c)},[]),t.jsx(Qt,{as:pr,allowPinchZoom:!0,children:t.jsx(ft,{...e,ref:o,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:F(e.onCloseAutoFocus,c=>{c.preventDefault(),i.current||r.triggerRef.current?.focus()}),onPointerDownOutside:F(e.onPointerDownOutside,c=>{const u=c.detail.originalEvent,f=u.button===0&&u.ctrlKey===!0,p=u.button===2||f;i.current=p},{checkForDefaultPrevented:!1}),onFocusOutside:F(e.onFocusOutside,c=>c.preventDefault(),{checkForDefaultPrevented:!1})})})}),mr=s.forwardRef((e,n)=>{const r=X(pe,e.__scopePopover),a=s.useRef(!1),o=s.useRef(!1);return t.jsx(ft,{...e,ref:n,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{e.onCloseAutoFocus?.(i),i.defaultPrevented||(a.current||r.triggerRef.current?.focus(),i.preventDefault()),a.current=!1,o.current=!1},onInteractOutside:i=>{e.onInteractOutside?.(i),i.defaultPrevented||(a.current=!0,i.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const c=i.target;r.triggerRef.current?.contains(c)&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&o.current&&i.preventDefault()}})}),ft=s.forwardRef((e,n)=>{const{__scopePopover:r,trapFocus:a,onOpenAutoFocus:o,onCloseAutoFocus:i,disableOutsidePointerEvents:c,onEscapeKeyDown:u,onPointerDownOutside:f,onFocusOutside:p,onInteractOutside:m,...h}=e,x=X(pe,r),v=ye(r);return Jt(),t.jsx(Zt,{asChild:!0,loop:!0,trapped:a,onMountAutoFocus:o,onUnmountAutoFocus:i,children:t.jsx(st,{asChild:!0,disableOutsidePointerEvents:c,onInteractOutside:m,onEscapeKeyDown:u,onPointerDownOutside:f,onFocusOutside:p,onDismiss:()=>x.onOpenChange(!1),children:t.jsx(et,{"data-state":ht(x.open),role:"dialog",id:x.contentId,...v,...h,ref:n,style:{...h.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),mt="PopoverClose",hr=s.forwardRef((e,n)=>{const{__scopePopover:r,...a}=e,o=X(mt,r);return t.jsx($.button,{type:"button",...a,ref:n,onClick:F(e.onClick,()=>o.onOpenChange(!1))})});hr.displayName=mt;var vr="PopoverArrow",xr=s.forwardRef((e,n)=>{const{__scopePopover:r,...a}=e,o=ye(r);return t.jsx(tt,{...o,...a,ref:n})});xr.displayName=vr;function ht(e){return e?"open":"closed"}var gr=it,yr=dt,br=ut,jr=pt;function Cr({...e}){return t.jsx(gr,{"data-slot":"popover",...e})}function wr({...e}){return t.jsx(yr,{"data-slot":"popover-trigger",...e})}function Pr({className:e,align:n="center",sideOffset:r=4,...a}){return t.jsx(br,{children:t.jsx(jr,{"data-slot":"popover-content",align:n,sideOffset:r,className:ne("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",e),...a})})}var We=1,Sr=.9,Nr=.8,Tr=.17,Re=.1,Ae=.999,Er=.9999,kr=.99,Rr=/[\\\/_+.#"@\[\(\{&]/,Ar=/[\\\/_+.#"@\[\(\{&]/g,Ir=/[\s-]/,vt=/[\s-]/g;function Le(e,n,r,a,o,i,c){if(i===n.length)return o===e.length?We:kr;var u=`${o},${i}`;if(c[u]!==void 0)return c[u];for(var f=a.charAt(i),p=r.indexOf(f,o),m=0,h,x,v,P;p>=0;)h=Le(e,n,r,a,p+1,i+1,c),h>m&&(p===o?h*=We:Rr.test(e.charAt(p-1))?(h*=Nr,v=e.slice(o,p-1).match(Ar),v&&o>0&&(h*=Math.pow(Ae,v.length))):Ir.test(e.charAt(p-1))?(h*=Sr,P=e.slice(o,p-1).match(vt),P&&o>0&&(h*=Math.pow(Ae,P.length))):(h*=Tr,o>0&&(h*=Math.pow(Ae,p-o))),e.charAt(p)!==n.charAt(i)&&(h*=Er)),(h<Re&&r.charAt(p-1)===a.charAt(i+1)||a.charAt(i+1)===a.charAt(i)&&r.charAt(p-1)!==a.charAt(i))&&(x=Le(e,n,r,a,p+1,i+2,c),x*Re>h&&(h=x*Re)),h>m&&(m=h),p=r.indexOf(f,p+1);return c[u]=m,m}function Ye(e){return e.toLowerCase().replace(vt," ")}function Or(e,n,r){return e=r&&r.length>0?`${e+" "+r.join(" ")}`:e,Le(e,n,Ye(e),Ye(n),0,0,{})}var he='[cmdk-group=""]',Ie='[cmdk-group-items=""]',_r='[cmdk-group-heading=""]',xt='[cmdk-item=""]',Qe=`${xt}:not([aria-disabled="true"])`,ze="cmdk-item-select",ae="data-value",Dr=(e,n,r)=>Or(e,n,r),gt=s.createContext(void 0),be=()=>s.useContext(gt),yt=s.createContext(void 0),Be=()=>s.useContext(yt),bt=s.createContext(void 0),jt=s.forwardRef((e,n)=>{let r=ie(()=>{var d,g;return{search:"",value:(g=(d=e.value)!=null?d:e.defaultValue)!=null?g:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),a=ie(()=>new Set),o=ie(()=>new Map),i=ie(()=>new Map),c=ie(()=>new Set),u=Ct(e),{label:f,children:p,value:m,onValueChange:h,filter:x,shouldFilter:v,loop:P,disablePointerSelection:T=!1,vimBindings:N=!0,..._}=e,O=J(),C=J(),E=J(),k=s.useRef(null),y=Gr();re(()=>{if(m!==void 0){let d=m.trim();r.current.value=d,S.emit()}},[m]),re(()=>{y(6,H)},[]);let S=s.useMemo(()=>({subscribe:d=>(c.current.add(d),()=>c.current.delete(d)),snapshot:()=>r.current,setState:(d,g,b)=>{var l,j,w,I;if(!Object.is(r.current[d],g)){if(r.current[d]=g,d==="search")ee(),K(),y(1,V);else if(d==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let A=document.getElementById(E);A?A.focus():(l=document.getElementById(O))==null||l.focus()}if(y(7,()=>{var A;r.current.selectedItemId=(A=z())==null?void 0:A.id,S.emit()}),b||y(5,H),((j=u.current)==null?void 0:j.value)!==void 0){let A=g??"";(I=(w=u.current).onValueChange)==null||I.call(w,A);return}}S.emit()}},emit:()=>{c.current.forEach(d=>d())}}),[]),oe=s.useMemo(()=>({value:(d,g,b)=>{var l;g!==((l=i.current.get(d))==null?void 0:l.value)&&(i.current.set(d,{value:g,keywords:b}),r.current.filtered.items.set(d,B(g,b)),y(2,()=>{K(),S.emit()}))},item:(d,g)=>(a.current.add(d),g&&(o.current.has(g)?o.current.get(g).add(d):o.current.set(g,new Set([d]))),y(3,()=>{ee(),K(),r.current.value||V(),S.emit()}),()=>{i.current.delete(d),a.current.delete(d),r.current.filtered.items.delete(d);let b=z();y(4,()=>{ee(),b?.getAttribute("id")===d&&V(),S.emit()})}),group:d=>(o.current.has(d)||o.current.set(d,new Set),()=>{i.current.delete(d),o.current.delete(d)}),filter:()=>u.current.shouldFilter,label:f||e["aria-label"],getDisablePointerSelection:()=>u.current.disablePointerSelection,listId:O,inputId:E,labelId:C,listInnerRef:k}),[]);function B(d,g){var b,l;let j=(l=(b=u.current)==null?void 0:b.filter)!=null?l:Dr;return d?j(d,r.current.search,g):0}function K(){if(!r.current.search||u.current.shouldFilter===!1)return;let d=r.current.filtered.items,g=[];r.current.filtered.groups.forEach(l=>{let j=o.current.get(l),w=0;j.forEach(I=>{let A=d.get(I);w=Math.max(A,w)}),g.push([l,w])});let b=k.current;U().sort((l,j)=>{var w,I;let A=l.getAttribute("id"),Y=j.getAttribute("id");return((w=d.get(Y))!=null?w:0)-((I=d.get(A))!=null?I:0)}).forEach(l=>{let j=l.closest(Ie);j?j.appendChild(l.parentElement===j?l:l.closest(`${Ie} > *`)):b.appendChild(l.parentElement===b?l:l.closest(`${Ie} > *`))}),g.sort((l,j)=>j[1]-l[1]).forEach(l=>{var j;let w=(j=k.current)==null?void 0:j.querySelector(`${he}[${ae}="${encodeURIComponent(l[0])}"]`);w?.parentElement.appendChild(w)})}function V(){let d=U().find(b=>b.getAttribute("aria-disabled")!=="true"),g=d?.getAttribute(ae);S.setState("value",g||void 0)}function ee(){var d,g,b,l;if(!r.current.search||u.current.shouldFilter===!1){r.current.filtered.count=a.current.size;return}r.current.filtered.groups=new Set;let j=0;for(let w of a.current){let I=(g=(d=i.current.get(w))==null?void 0:d.value)!=null?g:"",A=(l=(b=i.current.get(w))==null?void 0:b.keywords)!=null?l:[],Y=B(I,A);r.current.filtered.items.set(w,Y),Y>0&&j++}for(let[w,I]of o.current)for(let A of I)if(r.current.filtered.items.get(A)>0){r.current.filtered.groups.add(w);break}r.current.filtered.count=j}function H(){var d,g,b;let l=z();l&&(((d=l.parentElement)==null?void 0:d.firstChild)===l&&((b=(g=l.closest(he))==null?void 0:g.querySelector(_r))==null||b.scrollIntoView({block:"nearest"})),l.scrollIntoView({block:"nearest"}))}function z(){var d;return(d=k.current)==null?void 0:d.querySelector(`${xt}[aria-selected="true"]`)}function U(){var d;return Array.from(((d=k.current)==null?void 0:d.querySelectorAll(Qe))||[])}function q(d){let g=U()[d];g&&S.setState("value",g.getAttribute(ae))}function se(d){var g;let b=z(),l=U(),j=l.findIndex(I=>I===b),w=l[j+d];(g=u.current)!=null&&g.loop&&(w=j+d<0?l[l.length-1]:j+d===l.length?l[0]:l[j+d]),w&&S.setState("value",w.getAttribute(ae))}function R(d){let g=z(),b=g?.closest(he),l;for(;b&&!l;)b=d>0?Br(b,he):Kr(b,he),l=b?.querySelector(Qe);l?S.setState("value",l.getAttribute(ae)):se(d)}let G=()=>q(U().length-1),te=d=>{d.preventDefault(),d.metaKey?G():d.altKey?R(1):se(1)},W=d=>{d.preventDefault(),d.metaKey?q(0):d.altKey?R(-1):se(-1)};return s.createElement($.div,{ref:n,tabIndex:-1,..._,"cmdk-root":"",onKeyDown:d=>{var g;(g=_.onKeyDown)==null||g.call(_,d);let b=d.nativeEvent.isComposing||d.keyCode===229;if(!(d.defaultPrevented||b))switch(d.key){case"n":case"j":{N&&d.ctrlKey&&te(d);break}case"ArrowDown":{te(d);break}case"p":case"k":{N&&d.ctrlKey&&W(d);break}case"ArrowUp":{W(d);break}case"Home":{d.preventDefault(),q(0);break}case"End":{d.preventDefault(),G();break}case"Enter":{d.preventDefault();let l=z();if(l){let j=new Event(ze);l.dispatchEvent(j)}}}}},s.createElement("label",{"cmdk-label":"",htmlFor:oe.inputId,id:oe.labelId,style:Wr},f),Te(e,d=>s.createElement(yt.Provider,{value:S},s.createElement(gt.Provider,{value:oe},d))))}),Mr=s.forwardRef((e,n)=>{var r,a;let o=J(),i=s.useRef(null),c=s.useContext(bt),u=be(),f=Ct(e),p=(a=(r=f.current)==null?void 0:r.forceMount)!=null?a:c?.forceMount;re(()=>{if(!p)return u.item(o,c?.id)},[p]);let m=wt(o,i,[e.value,e.children,i],e.keywords),h=Be(),x=Z(y=>y.value&&y.value===m.current),v=Z(y=>p||u.filter()===!1?!0:y.search?y.filtered.items.get(o)>0:!0);s.useEffect(()=>{let y=i.current;if(!(!y||e.disabled))return y.addEventListener(ze,P),()=>y.removeEventListener(ze,P)},[v,e.onSelect,e.disabled]);function P(){var y,S;T(),(S=(y=f.current).onSelect)==null||S.call(y,m.current)}function T(){h.setState("value",m.current,!0)}if(!v)return null;let{disabled:N,value:_,onSelect:O,forceMount:C,keywords:E,...k}=e;return s.createElement($.div,{ref:xe(i,n),...k,id:o,"cmdk-item":"",role:"option","aria-disabled":!!N,"aria-selected":!!x,"data-disabled":!!N,"data-selected":!!x,onPointerMove:N||u.getDisablePointerSelection()?void 0:T,onClick:N?void 0:P},e.children)}),Lr=s.forwardRef((e,n)=>{let{heading:r,children:a,forceMount:o,...i}=e,c=J(),u=s.useRef(null),f=s.useRef(null),p=J(),m=be(),h=Z(v=>o||m.filter()===!1?!0:v.search?v.filtered.groups.has(c):!0);re(()=>m.group(c),[]),wt(c,u,[e.value,e.heading,f]);let x=s.useMemo(()=>({id:c,forceMount:o}),[o]);return s.createElement($.div,{ref:xe(u,n),...i,"cmdk-group":"",role:"presentation",hidden:h?void 0:!0},r&&s.createElement("div",{ref:f,"cmdk-group-heading":"","aria-hidden":!0,id:p},r),Te(e,v=>s.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":r?p:void 0},s.createElement(bt.Provider,{value:x},v))))}),zr=s.forwardRef((e,n)=>{let{alwaysRender:r,...a}=e,o=s.useRef(null),i=Z(c=>!c.search);return!r&&!i?null:s.createElement($.div,{ref:xe(o,n),...a,"cmdk-separator":"",role:"separator"})}),Fr=s.forwardRef((e,n)=>{let{onValueChange:r,...a}=e,o=e.value!=null,i=Be(),c=Z(p=>p.search),u=Z(p=>p.selectedItemId),f=be();return s.useEffect(()=>{e.value!=null&&i.setState("search",e.value)},[e.value]),s.createElement($.input,{ref:n,...a,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":f.listId,"aria-labelledby":f.labelId,"aria-activedescendant":u,id:f.inputId,type:"text",value:o?e.value:c,onChange:p=>{o||i.setState("search",p.target.value),r?.(p.target.value)}})}),$r=s.forwardRef((e,n)=>{let{children:r,label:a="Suggestions",...o}=e,i=s.useRef(null),c=s.useRef(null),u=Z(p=>p.selectedItemId),f=be();return s.useEffect(()=>{if(c.current&&i.current){let p=c.current,m=i.current,h,x=new ResizeObserver(()=>{h=requestAnimationFrame(()=>{let v=p.offsetHeight;m.style.setProperty("--cmdk-list-height",v.toFixed(1)+"px")})});return x.observe(p),()=>{cancelAnimationFrame(h),x.unobserve(p)}}},[]),s.createElement($.div,{ref:xe(i,n),...o,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":u,"aria-label":a,id:f.listId},Te(e,p=>s.createElement("div",{ref:xe(c,f.listInnerRef),"cmdk-list-sizer":""},p)))}),Hr=s.forwardRef((e,n)=>{let{open:r,onOpenChange:a,overlayClassName:o,contentClassName:i,container:c,...u}=e;return s.createElement(Xt,{open:r,onOpenChange:a},s.createElement(er,{container:c},s.createElement(tr,{"cmdk-overlay":"",className:o}),s.createElement(rr,{"aria-label":e.label,"cmdk-dialog":"",className:i},s.createElement(jt,{ref:n,...u}))))}),Ur=s.forwardRef((e,n)=>Z(r=>r.filtered.count===0)?s.createElement($.div,{ref:n,...e,"cmdk-empty":"",role:"presentation"}):null),qr=s.forwardRef((e,n)=>{let{progress:r,children:a,label:o="Loading...",...i}=e;return s.createElement($.div,{ref:n,...i,"cmdk-loading":"",role:"progressbar","aria-valuenow":r,"aria-valuemin":0,"aria-valuemax":100,"aria-label":o},Te(e,c=>s.createElement("div",{"aria-hidden":!0},c)))}),me=Object.assign(jt,{List:$r,Item:Mr,Input:Fr,Group:Lr,Separator:zr,Dialog:Hr,Empty:Ur,Loading:qr});function Br(e,n){let r=e.nextElementSibling;for(;r;){if(r.matches(n))return r;r=r.nextElementSibling}}function Kr(e,n){let r=e.previousElementSibling;for(;r;){if(r.matches(n))return r;r=r.previousElementSibling}}function Ct(e){let n=s.useRef(e);return re(()=>{n.current=e}),n}var re=typeof window>"u"?s.useEffect:s.useLayoutEffect;function ie(e){let n=s.useRef();return n.current===void 0&&(n.current=e()),n}function Z(e){let n=Be(),r=()=>e(n.snapshot());return s.useSyncExternalStore(n.subscribe,r,r)}function wt(e,n,r,a=[]){let o=s.useRef(),i=be();return re(()=>{var c;let u=(()=>{var p;for(let m of r){if(typeof m=="string")return m.trim();if(typeof m=="object"&&"current"in m)return m.current?(p=m.current.textContent)==null?void 0:p.trim():o.current}})(),f=a.map(p=>p.trim());i.value(e,u,f),(c=n.current)==null||c.setAttribute(ae,u),o.current=u}),o}var Gr=()=>{let[e,n]=s.useState(),r=ie(()=>new Map);return re(()=>{r.current.forEach(a=>a()),r.current=new Map},[e]),(a,o)=>{r.current.set(a,o),n({})}};function Vr(e){let n=e.type;return typeof n=="function"?n(e.props):"render"in n?n.render(e.props):e}function Te({asChild:e,children:n},r){return e&&s.isValidElement(n)?s.cloneElement(Vr(n),{ref:n.ref},r(n.props.children)):r(n)}var Wr={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};function Yr({className:e,...n}){return t.jsx(me,{"data-slot":"command",className:ne("bg-popover text-popover-foreground flex h-full w-full flex-col overflow-hidden rounded-md",e),...n})}function Qr({className:e,...n}){return t.jsxs("div",{"data-slot":"command-input-wrapper",className:"flex h-9 items-center gap-2 border-b px-3",children:[t.jsx(ir,{className:"size-4 shrink-0 opacity-50"}),t.jsx(me.Input,{"data-slot":"command-input",className:ne("placeholder:text-muted-foreground flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-hidden disabled:cursor-not-allowed disabled:opacity-50",e),...n})]})}function Jr({className:e,...n}){return t.jsx(me.List,{"data-slot":"command-list",className:ne("max-h-[300px] scroll-py-1 overflow-x-hidden overflow-y-auto",e),...n})}function Zr({...e}){return t.jsx(me.Empty,{"data-slot":"command-empty",className:"py-6 text-center text-sm",...e})}function Xr({className:e,...n}){return t.jsx(me.Group,{"data-slot":"command-group",className:ne("text-foreground [&_[cmdk-group-heading]]:text-muted-foreground overflow-hidden p-1 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium",e),...n})}function en({className:e,...n}){return t.jsx(me.Item,{"data-slot":"command-item",className:ne("data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled=true]:pointer-events-none data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...n})}var[Ee,Yn]=nt("Tooltip",[Pe]),ke=Pe(),Pt="TooltipProvider",tn=700,Fe="tooltip.open",[rn,Ke]=Ee(Pt),St=e=>{const{__scopeTooltip:n,delayDuration:r=tn,skipDelayDuration:a=300,disableHoverableContent:o=!1,children:i}=e,c=s.useRef(!0),u=s.useRef(!1),f=s.useRef(0);return s.useEffect(()=>{const p=f.current;return()=>window.clearTimeout(p)},[]),t.jsx(rn,{scope:n,isOpenDelayedRef:c,delayDuration:r,onOpen:s.useCallback(()=>{window.clearTimeout(f.current),c.current=!1},[]),onClose:s.useCallback(()=>{window.clearTimeout(f.current),f.current=window.setTimeout(()=>c.current=!0,a)},[a]),isPointerInTransitRef:u,onPointerInTransitChange:s.useCallback(p=>{u.current=p},[]),disableHoverableContent:o,children:i})};St.displayName=Pt;var ge="Tooltip",[nn,je]=Ee(ge),Nt=e=>{const{__scopeTooltip:n,children:r,open:a,defaultOpen:o,onOpenChange:i,disableHoverableContent:c,delayDuration:u}=e,f=Ke(ge,e.__scopeTooltip),p=ke(n),[m,h]=s.useState(null),x=J(),v=s.useRef(0),P=c??f.disableHoverableContent,T=u??f.delayDuration,N=s.useRef(!1),[_,O]=rt({prop:a,defaultProp:o??!1,onChange:S=>{S?(f.onOpen(),document.dispatchEvent(new CustomEvent(Fe))):f.onClose(),i?.(S)},caller:ge}),C=s.useMemo(()=>_?N.current?"delayed-open":"instant-open":"closed",[_]),E=s.useCallback(()=>{window.clearTimeout(v.current),v.current=0,N.current=!1,O(!0)},[O]),k=s.useCallback(()=>{window.clearTimeout(v.current),v.current=0,O(!1)},[O]),y=s.useCallback(()=>{window.clearTimeout(v.current),v.current=window.setTimeout(()=>{N.current=!0,O(!0),v.current=0},T)},[T,O]);return s.useEffect(()=>()=>{v.current&&(window.clearTimeout(v.current),v.current=0)},[]),t.jsx(Xe,{...p,children:t.jsx(nn,{scope:n,contentId:x,open:_,stateAttribute:C,trigger:m,onTriggerChange:h,onTriggerEnter:s.useCallback(()=>{f.isOpenDelayedRef.current?y():E()},[f.isOpenDelayedRef,y,E]),onTriggerLeave:s.useCallback(()=>{P?k():(window.clearTimeout(v.current),v.current=0)},[k,P]),onOpen:E,onClose:k,disableHoverableContent:P,children:r})})};Nt.displayName=ge;var $e="TooltipTrigger",Tt=s.forwardRef((e,n)=>{const{__scopeTooltip:r,...a}=e,o=je($e,r),i=Ke($e,r),c=ke(r),u=s.useRef(null),f=we(n,u,o.onTriggerChange),p=s.useRef(!1),m=s.useRef(!1),h=s.useCallback(()=>p.current=!1,[]);return s.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),t.jsx(Ue,{asChild:!0,...c,children:t.jsx($.button,{"aria-describedby":o.open?o.contentId:void 0,"data-state":o.stateAttribute,...a,ref:f,onPointerMove:F(e.onPointerMove,x=>{x.pointerType!=="touch"&&!m.current&&!i.isPointerInTransitRef.current&&(o.onTriggerEnter(),m.current=!0)}),onPointerLeave:F(e.onPointerLeave,()=>{o.onTriggerLeave(),m.current=!1}),onPointerDown:F(e.onPointerDown,()=>{o.open&&o.onClose(),p.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:F(e.onFocus,()=>{p.current||o.onOpen()}),onBlur:F(e.onBlur,o.onClose),onClick:F(e.onClick,o.onClose)})})});Tt.displayName=$e;var Ge="TooltipPortal",[on,sn]=Ee(Ge,{forceMount:void 0}),Et=e=>{const{__scopeTooltip:n,forceMount:r,children:a,container:o}=e,i=je(Ge,n);return t.jsx(on,{scope:n,forceMount:r,children:t.jsx(Se,{present:r||i.open,children:t.jsx(ot,{asChild:!0,container:o,children:a})})})};Et.displayName=Ge;var fe="TooltipContent",kt=s.forwardRef((e,n)=>{const r=sn(fe,e.__scopeTooltip),{forceMount:a=r.forceMount,side:o="top",...i}=e,c=je(fe,e.__scopeTooltip);return t.jsx(Se,{present:a||c.open,children:c.disableHoverableContent?t.jsx(Rt,{side:o,...i,ref:n}):t.jsx(an,{side:o,...i,ref:n})})}),an=s.forwardRef((e,n)=>{const r=je(fe,e.__scopeTooltip),a=Ke(fe,e.__scopeTooltip),o=s.useRef(null),i=we(n,o),[c,u]=s.useState(null),{trigger:f,onClose:p}=r,m=o.current,{onPointerInTransitChange:h}=a,x=s.useCallback(()=>{u(null),h(!1)},[h]),v=s.useCallback((P,T)=>{const N=P.currentTarget,_={x:P.clientX,y:P.clientY},O=un(_,N.getBoundingClientRect()),C=pn(_,O),E=fn(T.getBoundingClientRect()),k=hn([...C,...E]);u(k),h(!0)},[h]);return s.useEffect(()=>()=>x(),[x]),s.useEffect(()=>{if(f&&m){const P=N=>v(N,m),T=N=>v(N,f);return f.addEventListener("pointerleave",P),m.addEventListener("pointerleave",T),()=>{f.removeEventListener("pointerleave",P),m.removeEventListener("pointerleave",T)}}},[f,m,v,x]),s.useEffect(()=>{if(c){const P=T=>{const N=T.target,_={x:T.clientX,y:T.clientY},O=f?.contains(N)||m?.contains(N),C=!mn(_,c);O?x():C&&(x(),p())};return document.addEventListener("pointermove",P),()=>document.removeEventListener("pointermove",P)}},[f,m,c,p,x]),t.jsx(Rt,{...e,ref:i})}),[ln,cn]=Ee(ge,{isInside:!1}),dn=Dt("TooltipContent"),Rt=s.forwardRef((e,n)=>{const{__scopeTooltip:r,children:a,"aria-label":o,onEscapeKeyDown:i,onPointerDownOutside:c,...u}=e,f=je(fe,r),p=ke(r),{onClose:m}=f;return s.useEffect(()=>(document.addEventListener(Fe,m),()=>document.removeEventListener(Fe,m)),[m]),s.useEffect(()=>{if(f.trigger){const h=x=>{x.target?.contains(f.trigger)&&m()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[f.trigger,m]),t.jsx(st,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:c,onFocusOutside:h=>h.preventDefault(),onDismiss:m,children:t.jsxs(et,{"data-state":f.stateAttribute,...p,...u,ref:n,style:{...u.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[t.jsx(dn,{children:a}),t.jsx(ln,{scope:r,isInside:!0,children:t.jsx(Vt,{id:f.contentId,role:"tooltip",children:o||a})})]})})});kt.displayName=fe;var At="TooltipArrow",It=s.forwardRef((e,n)=>{const{__scopeTooltip:r,...a}=e,o=ke(r);return cn(At,r).isInside?null:t.jsx(tt,{...o,...a,ref:n})});It.displayName=At;function un(e,n){const r=Math.abs(n.top-e.y),a=Math.abs(n.bottom-e.y),o=Math.abs(n.right-e.x),i=Math.abs(n.left-e.x);switch(Math.min(r,a,o,i)){case i:return"left";case o:return"right";case r:return"top";case a:return"bottom";default:throw new Error("unreachable")}}function pn(e,n,r=5){const a=[];switch(n){case"top":a.push({x:e.x-r,y:e.y+r},{x:e.x+r,y:e.y+r});break;case"bottom":a.push({x:e.x-r,y:e.y-r},{x:e.x+r,y:e.y-r});break;case"left":a.push({x:e.x+r,y:e.y-r},{x:e.x+r,y:e.y+r});break;case"right":a.push({x:e.x-r,y:e.y-r},{x:e.x-r,y:e.y+r});break}return a}function fn(e){const{top:n,right:r,bottom:a,left:o}=e;return[{x:o,y:n},{x:r,y:n},{x:r,y:a},{x:o,y:a}]}function mn(e,n){const{x:r,y:a}=e;let o=!1;for(let i=0,c=n.length-1;i<n.length;c=i++){const u=n[i],f=n[c],p=u.x,m=u.y,h=f.x,x=f.y;m>a!=x>a&&r<(h-p)*(a-m)/(x-m)+p&&(o=!o)}return o}function hn(e){const n=e.slice();return n.sort((r,a)=>r.x<a.x?-1:r.x>a.x?1:r.y<a.y?-1:r.y>a.y?1:0),vn(n)}function vn(e){if(e.length<=1)return e.slice();const n=[];for(let a=0;a<e.length;a++){const o=e[a];for(;n.length>=2;){const i=n[n.length-1],c=n[n.length-2];if((i.x-c.x)*(o.y-c.y)>=(i.y-c.y)*(o.x-c.x))n.pop();else break}n.push(o)}n.pop();const r=[];for(let a=e.length-1;a>=0;a--){const o=e[a];for(;r.length>=2;){const i=r[r.length-1],c=r[r.length-2];if((i.x-c.x)*(o.y-c.y)>=(i.y-c.y)*(o.x-c.x))r.pop();else break}r.push(o)}return r.pop(),n.length===1&&r.length===1&&n[0].x===r[0].x&&n[0].y===r[0].y?n:n.concat(r)}var xn=St,gn=Nt,yn=Tt,bn=Et,jn=kt,Cn=It;function wn({delayDuration:e=0,...n}){return t.jsx(xn,{"data-slot":"tooltip-provider",delayDuration:e,...n})}function Pn({...e}){return t.jsx(wn,{children:t.jsx(gn,{"data-slot":"tooltip",...e})})}function Sn({...e}){return t.jsx(yn,{"data-slot":"tooltip-trigger",...e})}function Nn({className:e,sideOffset:n=0,children:r,...a}){return t.jsx(bn,{children:t.jsxs(jn,{"data-slot":"tooltip-content",sideOffset:n,className:ne("bg-primary text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",e),...a,children:[r,t.jsx(Cn,{className:"bg-primary fill-primary z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]})})}function Tn(e){return Mt({query:{retry:!1,initialData:e}})}function En(e){return Lt({query:{retry:!1,initialData:e}})}function Ot(e,n){if(e&&typeof e=="object"&&"error"in e){const r=e.error;if(typeof r=="string")return r}return n}function kn(){const e=He();return zt({mutation:{onSuccess:()=>{e.invalidateQueries({queryKey:["scheduling","preferences"]}),D.success("Preferences saved")},onError:n=>{D.error(Ot(n,"Failed to save preferences"))}}})}function Rn(){const e=He();return Ft({mutation:{onSuccess:()=>{e.invalidateQueries({queryKey:["scheduling","slots"]}),D.success("Timeslots updated")},onError:n=>{D.error(Ot(n,"Failed to update timeslots"))}}})}const An=e=>Ze({url:"/api/billing/checkout-session",method:"POST",signal:e}),In=e=>Ze({url:"/api/billing/portal-session",method:"POST",signal:e}),On=["none","few","free"],_n=["story","how_to","myth_bust","listicle","case_study","announcement"];function Dn(){const e=globalThis.crypto;return e&&typeof e.randomUUID=="function"?e.randomUUID():Math.random().toString(36).slice(2)}function Ce(e=""){return{id:Dn(),text:e}}function Mn(e){return On.includes(e)}function Ln(e){return _n.includes(e)}function Qn(){const e=$t.useLoaderData(),n=Ht(),r=n.location.search,a=r&&typeof r=="object"&&!Array.isArray(r)?r:void 0,o=(typeof a?.tab=="string"?a.tab:void 0)||new URLSearchParams(n.location.searchStr??"").get("tab"),i=s.useRef(null),c=s.useRef(null),u=s.useRef(null),f=s.useRef(null);s.useEffect(()=>{const l=o==="integrations"?i.current:o==="style"?c.current:o==="scheduling"?u.current:o==="billing"?f.current:null;l&&l.scrollIntoView({behavior:"smooth",block:"start"})},[o]);const{data:p,isLoading:m}=nr(e.linkedIn),h=He(),{user:x,refresh:v}=Ut(),[P,T]=s.useState(!1),[N,_]=s.useState(!1),[O,C]=s.useState(!1),E=(l,j)=>{if(l&&typeof l=="object"&&"error"in l){const w=l.error;if(typeof w=="string")return w}return j},k=async()=>{try{const{url:l}=await Bt();window.location.href=l}catch(l){D.error(E(l,"Failed to start LinkedIn OAuth"))}},y=async()=>{try{await qt(),await h.invalidateQueries({queryKey:["linkedin","status"]}),D.success("Disconnected from LinkedIn")}catch(l){D.error(E(l,"Failed to disconnect LinkedIn"))}},S=async()=>{try{T(!0);const{url:l}=await An();window.location.href=l}catch(l){D.error(E(l,"Unable to start checkout"))}finally{T(!1)}},oe=async()=>{try{if(!x?.stripeCustomerId){D.error("Billing portal is not available yet. Start a subscription first.");return}_(!0);const{url:l}=await In();window.location.href=l}catch(l){D.error(E(l,"Unable to open billing portal"))}finally{_(!1)}},B=async()=>{try{C(!0),await v(),D.success("Billing status refreshed")}catch(l){D.error(E(l,"Failed to refresh billing status"))}finally{C(!1)}},K=!!p?.connected,V=x?.subscriptionStatus??"inactive",ee=V.replace(/_/g," "),H=V==="active",z=!!x?.stripeCustomerId,U=x?.subscriptionCurrentPeriodEnd??null,q=x?.trialEndsAt??null,se=!!q&&q.getTime()>Date.now(),[R,G]=s.useState(e.style??null),[te,W]=s.useState(()=>(e.style?.examples||[]).map(l=>Ce(l))),[d,g]=s.useState(!1),b=async()=>{try{g(!0);const j={style:{tone:R?.tone||void 0,audience:R?.audience||void 0,goals:R?.goals||void 0,emojiPolicy:R?.emojiPolicy||void 0,constraints:R?.constraints||void 0,hashtagPolicy:R?.hashtagPolicy||void 0,glossary:R?.glossary||void 0,examples:te.map(A=>A.text.trim()).filter(Boolean).slice(0,3),defaultPostType:R?.defaultPostType}},I=(await Kt(j)).style??null;G(I),W((I?.examples||[]).map(A=>Ce(A))),D.success("Writing style saved")}catch{D.error("Failed to save style")}finally{g(!1)}};return t.jsxs("div",{className:"p-6 space-y-10",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-semibold mb-2",children:"Settings"}),t.jsx("p",{className:"text-zinc-600",children:"Profile, Integrations, and Defaults."})]}),t.jsxs("section",{ref:i,children:[t.jsx("h2",{id:"integrations",className:"text-lg font-medium mb-3 scroll-mt-24",children:"Integrations"}),t.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:t.jsxs(le,{children:[t.jsx(ce,{className:"pb-3",children:t.jsx(de,{children:"LinkedIn"})}),t.jsxs(ue,{className:"pt-0 flex items-center justify-between",children:[t.jsx("div",{className:"text-sm text-zinc-700",children:m?"Checking status…":K?"Connected":"Not connected"}),t.jsx("div",{className:"flex items-center gap-2",children:K?t.jsx(L,{variant:"outline",size:"sm",onClick:y,children:"Disconnect"}):t.jsx(L,{size:"sm",onClick:k,children:"Connect LinkedIn"})})]})]})})]}),t.jsxs("section",{ref:c,children:[t.jsx("h2",{id:"writing-style",className:"text-lg font-medium mb-3 scroll-mt-24",children:"Writing Style"}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs(le,{children:[t.jsxs(ce,{className:"pb-3",children:[t.jsx(de,{children:"Style Profile"}),t.jsx("div",{className:"text-sm text-zinc-600",children:"Set your default voice, audience, and constraints."})]}),t.jsxs(ue,{className:"pt-0 space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"form-field",children:[t.jsx(Q,{htmlFor:"style-tone",children:"Tone"}),t.jsx(ve,{id:"style-tone",value:R?.tone||"",onChange:l=>G({...R||{},tone:l.target.value})})]}),t.jsxs("div",{className:"form-field",children:[t.jsx(Q,{htmlFor:"style-audience",children:"Audience"}),t.jsx(ve,{id:"style-audience",value:R?.audience||"",onChange:l=>G({...R||{},audience:l.target.value})})]}),t.jsxs("div",{className:"form-field",children:[t.jsx(Q,{htmlFor:"style-goals",children:"Goals"}),t.jsx(ve,{id:"style-goals",value:R?.goals||"",onChange:l=>G({...R||{},goals:l.target.value})})]}),t.jsxs("div",{className:"form-field",children:[t.jsx(Q,{htmlFor:"style-emoji",children:"Emoji policy"}),t.jsxs(Oe,{value:R?.emojiPolicy||"few",onValueChange:l=>{Mn(l)&&G({...R||{},emojiPolicy:l})},children:[t.jsx(_e,{id:"style-emoji",children:t.jsx(De,{placeholder:"Select"})}),t.jsxs(Me,{children:[t.jsx(M,{value:"none",children:"None"}),t.jsx(M,{value:"few",children:"Few"}),t.jsx(M,{value:"free",children:"Free"})]})]})]}),t.jsxs("div",{className:"form-field",children:[t.jsx(Q,{htmlFor:"style-posttype",children:"Default post type"}),t.jsxs(Oe,{value:R?.defaultPostType||"story",onValueChange:l=>{Ln(l)&&G({...R||{},defaultPostType:l})},children:[t.jsx(_e,{id:"style-posttype",children:t.jsx(De,{placeholder:"Select"})}),t.jsxs(Me,{children:[t.jsx(M,{value:"story",children:"Story"}),t.jsx(M,{value:"how_to",children:"How-to"}),t.jsx(M,{value:"myth_bust",children:"Myth-bust"}),t.jsx(M,{value:"listicle",children:"Listicle"}),t.jsx(M,{value:"case_study",children:"Case study"}),t.jsx(M,{value:"announcement",children:"Announcement"})]})]})]})]}),t.jsx("div",{className:"flex items-center justify-end",children:t.jsx(L,{onClick:b,disabled:d,children:d?"Saving…":"Save Writing Style"})})]})]}),t.jsxs(le,{children:[t.jsxs(ce,{className:"pb-3",children:[t.jsx(de,{children:"Few-shot Examples"}),t.jsx("div",{className:"mt-1 text-sm text-zinc-600",children:"Add up to 3 of your own posts to guide tone and structure."})]}),t.jsx(ue,{className:"pt-0 space-y-4",children:te.length===0?t.jsxs("div",{className:"rounded-md border border-dashed bg-zinc-50 p-6 text-center",children:[t.jsx("div",{className:"text-sm text-zinc-600",children:"No examples added yet."}),t.jsx("div",{className:"mt-2 text-xs text-zinc-500",children:"Paste a representative post (2–5 short paragraphs; hashtags at the end)."}),t.jsx("div",{className:"mt-3",children:t.jsx(L,{type:"button",size:"sm",onClick:()=>W([Ce()]),children:"Add your first example"})})]}):t.jsxs("div",{className:"space-y-3",children:[te.map((l,j)=>t.jsxs("div",{className:"rounded-md border bg-white p-3",children:[t.jsxs("div",{className:"flex items-center justify-between gap-2",children:[t.jsxs(Q,{htmlFor:`ex-${l.id}`,children:["Example ",j+1]}),t.jsxs("div",{className:"flex items-center gap-3 text-xs text-zinc-500",children:[t.jsxs("span",{children:[l.text.length,"/1200"]}),t.jsx(L,{type:"button",size:"sm",variant:"ghost",onClick:()=>W(w=>w.filter(I=>I.id!==l.id)),children:"Remove"})]})]}),t.jsx(Gt,{id:`ex-${l.id}`,className:"mt-2 h-40",value:l.text,onChange:w=>{const I=w.target.value.slice(0,1200);W(A=>A.map(Y=>Y.id===l.id?{...Y,text:I}:Y))},placeholder:"Paste a representative LinkedIn post…"})]},l.id)),t.jsx("div",{className:"flex items-center justify-end",children:t.jsx(L,{type:"button",size:"sm",variant:"outline",disabled:te.length>=3,onClick:()=>W(l=>l.length<3?[...l,Ce()]:l),children:"Add another example"})})]})})]})]})]}),t.jsxs("section",{ref:u,children:[t.jsx("h2",{id:"scheduling",className:"text-lg font-medium mb-3 scroll-mt-24",children:"Scheduling"}),t.jsx(zn,{initialPrefs:e.preferences,initialSlots:e.slots})]}),t.jsxs("section",{ref:f,children:[t.jsx("h2",{id:"billing",className:"text-lg font-medium mb-3 scroll-mt-24",children:"Billing"}),t.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:t.jsxs(le,{children:[t.jsxs(ce,{className:"pb-3",children:[t.jsx(de,{children:"Subscription"}),t.jsxs("p",{className:"text-sm text-zinc-600",children:["Content Creation Pro · ",Ve(50)," per month"]})]}),t.jsxs(ue,{className:"space-y-4",children:[t.jsxs("div",{className:"space-y-1 text-sm text-zinc-600",children:[t.jsxs("div",{children:[t.jsx("span",{className:"font-medium text-zinc-800",children:"Status:"})," ",ee]}),H&&U?t.jsxs("div",{children:["Next renewal ",U.toLocaleDateString()]}):null,q?t.jsxs("div",{className:se?"text-amber-600":"text-zinc-500",children:["Trial ",se?"ends":"ended"," ",Wt(q,{addSuffix:!0})]}):t.jsx("div",{className:"text-zinc-500",children:"No trial configured"})]}),t.jsxs("div",{className:"flex flex-wrap gap-2",children:[!H&&t.jsx(L,{onClick:S,disabled:P,children:P?"Redirecting…":`Subscribe for ${Ve(50)}/month`}),z&&t.jsx(L,{variant:"outline",onClick:oe,disabled:N,children:N?"Opening…":"Manage billing"}),t.jsx(L,{variant:"ghost",onClick:B,disabled:O,children:O?"Refreshing…":"Refresh status"})]}),!z&&!H?t.jsx("p",{className:"text-xs text-zinc-500",children:"Secure checkout via Stripe. Subscriptions are $50/month with no automatic free trial."}):null]})]})})]})]})}function zn({initialPrefs:e,initialSlots:n}){const r=Tn(e),a=En(n),o=kn(),i=Rn(),c=s.useMemo(()=>{const C=["Etc/GMT+12","Pacific/Pago_Pago","Pacific/Honolulu","Pacific/Marquesas","America/Anchorage","America/Los_Angeles","America/Denver","America/Chicago","America/New_York","America/Santo_Domingo","America/St_Johns","America/Argentina/Buenos_Aires","America/Noronha","Atlantic/Cape_Verde","Europe/London","Europe/Berlin","Africa/Cairo","Africa/Nairobi","Asia/Tehran","Asia/Dubai","Asia/Kabul","Asia/Karachi","Asia/Kolkata","Asia/Kathmandu","Asia/Dhaka","Asia/Yangon","Asia/Bangkok","Asia/Singapore","Australia/Eucla","Asia/Tokyo","Australia/Darwin","Australia/Sydney","Australia/Lord_Howe","Pacific/Noumea","Pacific/Auckland","Pacific/Chatham","Pacific/Tongatapu","Pacific/Kiritimati"],E=y=>{try{const B=(new Intl.DateTimeFormat("en-US",{timeZone:y,timeZoneName:"shortOffset",hour12:!1,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}).formatToParts(new Date).find(q=>q.type==="timeZoneName")?.value||"").match(/(?:GMT|UTC)([+\-])(\d{1,2})(?::?(\d{2}))?/i);if(!B)return{minutes:0,label:"UTC±00:00"};const K=B[1]==="-"?-1:1,V=Number(B[2]||"0"),ee=Number(B[3]||"0"),H=K*(V*60+ee),z=String(Math.floor(Math.abs(H)/60)).padStart(2,"0"),U=String(Math.abs(H)%60).padStart(2,"0");return{minutes:H,label:`UTC${K<0?"-":"+"}${z}:${U}`}}catch{return{minutes:0,label:"UTC±00:00"}}},k=C.map(y=>{const S=E(y);return{value:y,label:`(${S.label}) ${y}`,minutes:S.minutes}});return k.sort((y,S)=>y.minutes-S.minutes||y.value.localeCompare(S.value)),k},[]),[u,f]=s.useState(r.data?.preferences.timezone||"Europe/London"),[p,m]=s.useState(r.data?.preferences.leadTimeMinutes?.toString()||"30");s.useEffect(()=>{r.data?.preferences&&(f(r.data.preferences.timezone),m(String(r.data.preferences.leadTimeMinutes??30)))},[r.data]);const[h,x]=s.useState("1"),[v,P]=s.useState("09:00"),T=a.data?.items||[],N=()=>{if(!v||!/^([01]\d|2[0-3]):[0-5]\d$/.test(v)){D.error("Invalid time; use HH:mm");return}const C=Number(h);if(T.some(y=>y.isoDayOfWeek===C&&y.time===v)){D.error("Duplicate slot");return}const k=[...T,{isoDayOfWeek:C,time:v,active:!0}];i.mutate({items:k})},_=C=>{const E=T.filter((k,y)=>y!==C);if(E.length===0){D.error("At least one timeslot is required");return}i.mutate({items:E})},O=()=>{const C=Number(p);if(!Number.isInteger(C)||C<0||C>1440){D.error("Lead time must be between 0 and 1440");return}o.mutate({timezone:u,leadTimeMinutes:C})};return t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[t.jsxs(le,{children:[t.jsxs(ce,{className:"pb-3",children:[t.jsx(de,{children:"Preferences"}),t.jsx("div",{className:"text-sm text-zinc-600",children:"Timezone and lead-time defaults for scheduling."})]}),t.jsxs(ue,{className:"pt-0 space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[t.jsxs("div",{className:"form-field md:col-span-2",children:[t.jsx(Q,{htmlFor:"tz",children:"Timezone"}),t.jsx(Fn,{id:"tz",value:u,onChange:f,options:c})]}),t.jsxs("div",{className:"form-field",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Q,{htmlFor:"lead",children:"Lead time (minutes)"}),t.jsxs(Pn,{children:[t.jsx(Sn,{asChild:!0,children:t.jsx(sr,{className:"h-4 w-4 text-zinc-500","aria-label":"Lead time info"})}),t.jsx(Nn,{children:"Buffer before earliest eligible timeslot"})]})]}),t.jsx(ve,{id:"lead",type:"number",min:0,max:1440,value:p,onChange:C=>m(C.target.value),className:"w-28 sm:w-36 md:w-40"})]})]}),t.jsx("div",{className:"flex justify-end",children:t.jsx(L,{size:"sm",onClick:O,disabled:o.isPending,children:o.isPending?"Saving…":"Save Preferences"})})]})]}),t.jsxs(le,{children:[t.jsxs(ce,{className:"pb-3",children:[t.jsx(de,{children:"Preferred Timeslots"}),t.jsx("div",{className:"text-sm text-zinc-600",children:"Add default days/times for auto-scheduling."})]}),t.jsxs(ue,{className:"pt-0 space-y-4",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs(Oe,{value:h,onValueChange:x,children:[t.jsx(_e,{className:"w-40",children:t.jsx(De,{placeholder:"Day"})}),t.jsxs(Me,{children:[t.jsx(M,{value:"1",children:"Monday"}),t.jsx(M,{value:"2",children:"Tuesday"}),t.jsx(M,{value:"3",children:"Wednesday"}),t.jsx(M,{value:"4",children:"Thursday"}),t.jsx(M,{value:"5",children:"Friday"}),t.jsx(M,{value:"6",children:"Saturday"}),t.jsx(M,{value:"7",children:"Sunday"})]})]}),t.jsx(ve,{type:"time",value:v,onChange:C=>P(C.target.value),className:"w-36"}),t.jsx(L,{size:"sm",variant:"secondary",onClick:N,disabled:i.isPending,children:"Add Slot"})]}),t.jsx("div",{className:"space-y-1",children:a.isLoading?t.jsx("div",{className:"text-sm text-zinc-600",children:"Loading slots…"}):T.length===0?t.jsx("div",{className:"text-sm text-zinc-600",children:"No slots configured."}):T.map((C,E)=>t.jsxs("div",{className:"flex items-center justify-between text-sm",children:[t.jsxs("div",{children:[t.jsx("span",{className:"font-medium mr-2",children:["","Mon","Tue","Wed","Thu","Fri","Sat","Sun"][C.isoDayOfWeek]}),t.jsx("span",{className:"text-zinc-700",children:C.time})]}),t.jsx(L,{size:"sm",variant:"ghost",onClick:()=>_(E),disabled:i.isPending,children:"Remove"})]},`${C.isoDayOfWeek}-${C.time}`))})]})]})]})}function Fn({id:e,value:n,onChange:r,options:a}){const[o,i]=s.useState(!1),c=a.find(u=>u.value===n)?.label||n||"Select timezone";return t.jsxs(Cr,{open:o,onOpenChange:i,children:[t.jsx(wr,{asChild:!0,children:t.jsxs(L,{id:e,variant:"outline","aria-expanded":o,"aria-haspopup":"listbox",className:"w-full justify-between",children:[t.jsx("span",{className:"truncate max-w-[85%] text-left",children:c}),t.jsx("span",{className:"text-xs text-zinc-500",children:"▼"})]})}),t.jsx(Pr,{className:"min-w-[420px] w-fit max-w-[640px] p-0",children:t.jsxs(Yr,{children:[t.jsx(Qr,{placeholder:"Search timezone…"}),t.jsx(Zr,{children:"No timezone found."}),t.jsx(Jr,{children:t.jsx(Xr,{children:a.map(u=>t.jsx(en,{value:u.value,onSelect:f=>{r(f),i(!1)},children:t.jsx("span",{className:"whitespace-normal break-words",children:u.label})},u.value))})})]})})]})}export{Qn as component};
