<div class="project-actions bg-white rounded-lg shadow-sm p-6">
  <h2 class="text-lg font-semibold mb-4">Actions</h2>
  
  <!-- Review Required Alert -->
  @if (needsReview()) {
    <div class="mb-4 p-3 bg-amber-50 border border-amber-200 rounded-lg">
      <div class="flex items-center gap-2">
        <i class="pi pi-exclamation-triangle text-amber-600"></i>
        <span class="text-sm font-medium text-amber-800">
          {{ getReviewCount() }} {{ getReviewCount() === 1 ? 'item needs' : 'items need' }} your review
        </span>
      </div>
    </div>
  }
  
  <!-- Suggested Action -->
  @if (getSuggestedAction(); as suggestedAction) {
    <div class="suggested-action mb-4">
      <p class="text-xs text-gray-600 mb-2">Suggested Next Step:</p>
      <button 
        pButton 
        [label]="suggestedAction.label"
        [icon]="suggestedAction.icon"
        [severity]="suggestedAction.severity || 'primary'"
        [pTooltip]="suggestedAction.description"
        tooltipPosition="top"
        class="w-full"
        (click)="onActionClick(suggestedAction)">
      </button>
    </div>
  }
  
  <!-- All Available Actions Grid -->
  <div class="actions-grid">
    <p class="text-xs text-gray-600 mb-3">Available Actions:</p>
    <div class="grid grid-cols-1 sm:grid-cols-2 gap-2">
      @for (action of availableActions; track action.id) {
        @if (action.enabled && action.id !== 'review-required') {
          <button 
            pButton 
            [label]="action.label"
            [icon]="action.icon"
            [severity]="action.severity || 'secondary'"
            [pTooltip]="action.description"
            tooltipPosition="top"
            [class.p-button-outlined]="!action.primary"
            class="action-button"
            (click)="onActionClick(action)">
          </button>
        }
      }
    </div>
    
    <!-- Disabled Actions -->
    @if (getDisabledActions().length > 0) {
      <div class="mt-4">
        <p class="text-xs text-gray-500 mb-2">Unavailable Actions:</p>
        <div class="space-y-2">
          @for (action of getDisabledActions(); track action.id) {
            @if (action.id !== 'review-required') {
              <div class="flex items-center gap-2 text-gray-400">
                <i [class]="action.icon + ' text-sm'"></i>
                <span class="text-sm">{{ action.label }}</span>
                <i 
                  class="pi pi-info-circle text-xs ml-auto"
                  [pTooltip]="action.description"
                  tooltipPosition="left">
                </i>
              </div>
            }
          }
        </div>
      </div>
    }
  </div>
  
  <!-- Quick Info Panel -->
  <div class="mt-6 pt-4 border-t border-gray-200">
    <div class="grid grid-cols-2 gap-4 text-xs">
      <div>
        <span class="text-gray-500">Current Stage:</span>
        <p class="font-medium text-gray-900">{{ formatStage(project.currentStage) }}</p>
      </div>
      <div>
        <span class="text-gray-500">Progress:</span>
        <p class="font-medium text-gray-900">{{ project.overallProgress }}%</p>
      </div>
      @if (insights.length > 0) {
        <div>
          <span class="text-gray-500">Insights:</span>
          <p class="font-medium text-gray-900">
            {{ insights.filter(i => i.isApproved).length }} / {{ insights.length }} approved
          </p>
        </div>
      }
      @if (posts.length > 0) {
        <div>
          <span class="text-gray-500">Posts:</span>
          <p class="font-medium text-gray-900">
            {{ posts.filter(p => p.isApproved).length }} / {{ posts.length }} approved
          </p>
        </div>
      }
    </div>
  </div>
  
  <!-- Help Text -->
  <div class="mt-4 p-3 bg-blue-50 rounded-lg">
    <div class="flex items-start gap-2">
      <i class="pi pi-info-circle text-blue-600 text-sm mt-0.5"></i>
      <div class="text-xs text-blue-800">
        <p class="font-medium mb-1">How it works:</p>
        <p>{{ getStageHelpText(project.currentStage) }}</p>
      </div>
    </div>
  </div>
</div>

<!-- Confirmation Dialog -->
<p-confirmDialog></p-confirmDialog>